

## Project Overview

This is a Cloudflare Workers project using the Hono web framework with Workers AI integration. The worker is configured to use Cloudflare's AI models for text generation.

## Development Commands

- `npm run dev` - Start local development server (runs on http://localhost:8787/)
- `npm run deploy` - Deploy worker to Cloudflare
- `npm test` - Run tests using Vitest
- `npm run cf-typegen` - Regenerate TypeScript types for bindings from wrangler.jsonc

## Architecture

### Framework
- **Hono**: Lightweight web framework used for routing and request handling
- Worker exports a Hono app instance as the default export

### Bindings Configuration
Bindings are configured in `wrangler.jsonc` and types are auto-generated by running `npm run cf-typegen`:

- **AI Binding**: Configured with `"remote": true` for Workers AI access
  - Accessed via `c.env.AI` in route handlers
  - Types are auto-generated in `worker-configuration.d.ts`

### Workers AI Usage
The AI binding is used directly via `c.env.AI.run(modelName, options)`:
- Model names follow format: `@cf/[provider]/[model-name]` (e.g., `@cf/meta/llama-3-8b-instruct`)
- Available models are typed in the generated `worker-configuration.d.ts`
- Use messages format: `{ messages: [{ role: 'system' | 'user', content: string }] }`
- DO NOT instantiate an AI class - use the binding directly

### Type System
- `Env` interface defines available bindings (AI, etc.)
- After adding/changing bindings in `wrangler.jsonc`, regenerate types with `npm run cf-typegen`
- Auto-generated types in `worker-configuration.d.ts` include all available AI models and their input/output types

### Testing
- Uses Vitest with `@cloudflare/vitest-pool-workers` for Workers-specific testing
- Test files in `test/` directory
- Two testing styles supported:
  - Unit style: Direct `worker.fetch()` calls with mocked env
  - Integration style: Using `SELF.fetch()` for full integration testing
- Tests run against the actual worker configuration from `wrangler.jsonc`
